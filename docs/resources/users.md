---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "umbrella_users Resource - terraform-provider-umbrella"
subcategory: ""
description: |-
  Manages user accounts in Cisco Umbrella. Users represent individual accounts with specific roles and permissions within your organization.
---

# umbrella_users (Resource)

Manages user accounts in Cisco Umbrella. Users represent individual accounts with specific roles and permissions within your organization.

## Important Notes

- **Updates Not Supported**: The Umbrella Users API does not support updating existing users. To modify a user, you must delete and recreate the user account. This is a limitation of the Umbrella API, not the Terraform provider.
- **Email Changes**: Changing the email address will force recreation of the user resource.
- **Password Security**: The password is marked as sensitive and will not be displayed in Terraform output or logs.

## Example Usage

```terraform
# Create a basic user account
resource "umbrella_users" "admin_user" {
  email     = "admin@example.com"
  firstname = "John"
  lastname  = "Doe"
  password  = "SecurePassword123!"
  role_id   = 1
  timezone  = "America/New_York"
}

# Create a read-only user
resource "umbrella_users" "readonly_user" {
  email     = "readonly@example.com"
  firstname = "Jane"
  lastname  = "Smith"
  password  = "AnotherSecurePassword456!"
  role_id   = 2
  timezone  = "UTC"
}

# Create a user with special characters in name
resource "umbrella_users" "international_user" {
  email     = "jose.garcia@example.com"
  firstname = "José"
  lastname  = "García-López"
  password  = "P@ssw0rd!#$%"
  role_id   = 1
  timezone  = "Europe/Madrid"
}
```

## Schema

### Required

- `email` (String) The user's email address (must be unique). Changing this forces recreation of the resource.
- `firstname` (String) The user's first name (minimum 1 character)
- `lastname` (String) The user's last name (minimum 1 character)
- `password` (String, Sensitive) The user's password (minimum 1 character)
- `role_id` (Number) The role ID to assign to the user (minimum 1)
- `timezone` (String) The user's timezone (minimum 1 character)

### Read-Only

- `id` (String) The unique identifier for this user (same as user_id)
- `last_login_time` (String) The user's last login date and time (ISO8601 timestamp)
- `role` (String) The user's role name
- `status` (String) The user's status (e.g., 'on', 'off')
- `two_factor_enabled` (Boolean) Specifies whether two-factor authentication is enabled
- `user_id` (Number) The numeric user ID

## Import

Users can be imported using their user ID:

```shell
terraform import umbrella_users.example 12345
```

## Common Role IDs

The following are common role IDs in Umbrella organizations:

- `1` - Full Admin
- `2` - Read Only
- `3` - Block Page Bypass
- `4` - Reporting Only

**Note**: Role IDs may vary between organizations. Use the Umbrella console or API to verify the correct role IDs for your organization.

## Validation Rules

- **Email**: Must be a valid email address format (contains '@' symbol)
- **First Name**: Must be at least 1 character long (whitespace trimmed)
- **Last Name**: Must be at least 1 character long (whitespace trimmed)
- **Password**: Must be at least 1 character long
- **Role ID**: Must be at least 1
- **Timezone**: Must be at least 1 character long (whitespace trimmed)

## API Limitations

The Umbrella Users API has the following limitations that affect this resource:

1. **No Update Support**: Users cannot be updated once created. Any changes require recreation.
2. **Password Not Returned**: The API does not return password values, so password changes cannot be detected through drift detection.
3. **Email Uniqueness**: Email addresses must be unique across the organization.

## Security Considerations

- **Password Management**: Passwords are stored in Terraform state. Consider using external password management systems and rotating passwords regularly.
- **Role-Based Access**: Ensure users are assigned appropriate roles based on the principle of least privilege.
- **Two-Factor Authentication**: Enable 2FA for users when possible (this is managed through the Umbrella console, not this resource).

## Troubleshooting

### Common Errors

- **"Email already in use"**: The email address is already associated with another user account.
- **"Update Not Supported"**: Attempted to update a user. Delete and recreate the resource instead.
- **"Invalid role ID"**: The specified role ID does not exist in your organization.

### Best Practices

1. Use descriptive resource names that include the user's role or department
2. Group users by role or function using consistent naming conventions
3. Consider using variables for common values like timezone and role_id
4. Implement proper password policies and rotation procedures
5. Test user creation in a development environment before applying to production

## Related Resources

- Use `umbrella_roles` data source to discover available role IDs
- Consider `umbrella_organizations` data source for multi-org setups